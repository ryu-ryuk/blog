<!doctype html><html data-theme=dark lang=en xmlns=http://www.w3.org/1999/xhtml><head><meta charset=UTF-8><meta content="Tech, Rust, Cybersecurity, and Notes" name=description><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#9a9996 name=theme-color><title>Building a Containerized Financial Data API with FastAPI and Docker - stderr.log@ryu</title><link href=https://blogs.alokranjan.me/blog/inv/ rel=canonical><link title="stderr.log@ryu - RSS Feed" href=https://blogs.alokranjan.me/rss.xml rel=alternate type=application/rss+xml><link title="stderr.log@ryu - Atom Feed" href=https://blogs.alokranjan.me/atom.xml rel=alternate type=application/atom+xml><style>:root{--accent-color:#6f8396}</style><link href=https://blogs.alokranjan.me/style.css rel=stylesheet><script defer src=https://blogs.alokranjan.me/closable.js></script><script defer src=https://blogs.alokranjan.me/elasticlunr.min.js></script><script defer src=https://blogs.alokranjan.me/search-elasticlunr.js></script><script defer src=https://blogs.alokranjan.me/theme-switcher.js></script><meta content=stderr.log@ryu property=og:site_name><meta content="Building a Containerized Financial Data API with FastAPI and Docker - stderr.log@ryu" property=og:title><meta content=https://blogs.alokranjan.me/blog/inv/ property=og:url><meta content="A backend project featuring FastAPI, PostgreSQL, and Docker, with a tested moving average crossover trading strategy." property=og:description><meta content=https://blogs.alokranjan.me/card.png property=og:image><meta content=en_US property=og:locale><body><header id=site-nav><nav><a href=#main-content tabindex=0> Skip to Main Content </a><ul><li id=home><a href=https://blogs.alokranjan.me> <i class=icon></i>stderr.log@ryu</a><li class=divider><li><a href=https://blogs.alokranjan.me>home</a><li><a href=https://blogs.alokranjan.me/blog>blog</a><li><a href=https://blogs.alokranjan.me/tags>tags</a><li><a class=external href=https://alokranjan.me>portfolio</a><li id=search><button class=circle id=search-toggle title=Search><i class=icon></i></button><li id=theme-switcher><details class=closable><summary class=circle title=Theme><i class=icon></i></summary> <ul><li><button title="Switch to Light Theme" class=circle id=theme-light><i class=icon></i></button><li><button title="Switch to Dark Theme" class=circle id=theme-dark><i class=icon></i></button><li><button title="Use System Theme" class=circle id=theme-system><i class=icon></i></button></ul></details><li id=feed><details class=closable><summary class=circle title=Feed><i class=icon></i></summary> <ul><li><a href=https://blogs.alokranjan.me/rss.xml>RSS</a><li><a href=https://blogs.alokranjan.me/atom.xml>Atom</a></ul></details><li id=repo><a class=circle href=https://github.com/ryu-ryuk/blog title=Repository> <i class=icon></i> </a></ul></nav><div id=search-container><label class=visually-hidden for=search-bar>Search</label><input placeholder="Search forâ€¦" autocomplete=off disabled id=search-bar type=search><div id=search-results-container><div id=search-results></div></div></div></header><main id=main-content><div id=buttons-container><a title="Go to Top" href=#top id=go-to-top><i class=icon></i></a></div><article><div id=heading><p><small> <time datetime=" 2025-07-18T00:00:00+00:00">Published on July 18, 2025</time><span> â€¢ </span> <time datetime=" 2025-07-18T00:00:00+00:00">Updated on July 18, 2025</time></small><h1>Building a Containerized Financial Data API with FastAPI and Docker</h1><p><small><span>By ryu</span><span> â€¢ </span><span>3 minute read</span><span> â€¢ </span></small><ul class=tags><a class=tag href=https://blogs.alokranjan.me/tags>tags:</a><li><a class=tag href=https://blogs.alokranjan.me/tags/python/>python</a><li><a class=tag href=https://blogs.alokranjan.me/tags/fastapi/>fastapi</a><li><a class=tag href=https://blogs.alokranjan.me/tags/docker/>docker</a><li><a class=tag href=https://blogs.alokranjan.me/tags/postgresql/>postgresql</a><li><a class=tag href=https://blogs.alokranjan.me/tags/sqlalchemy/>sqlalchemy</a><li><a class=tag href=https://blogs.alokranjan.me/tags/projects/>projects</a></ul><br></div><div id=buttons-container><details class=closable id=toc><summary title="Table of Contents"><i class=icon></i></summary> <div><strong class=title>Table of Contents</strong><div><ol><li><a href=https://blogs.alokranjan.me/blog/inv/#how-it-started>How it started?</a><li><a href=https://blogs.alokranjan.me/blog/inv/#what-s-inside>Whatâ€™s inside?</a><li><a href=https://blogs.alokranjan.me/blog/inv/#the-trading-logic>The Trading Logic!</a><li><a href=https://blogs.alokranjan.me/blog/inv/#uff-bugs>Uff! Bugs</a><ol><li><a href=https://blogs.alokranjan.me/blog/inv/#beetle-test-db-nightmare>ğŸ Test DB nightmare</a><li><a href=https://blogs.alokranjan.me/blog/inv/#beetle-strategy-returns-0-trades>ğŸ Strategy returns â€œ0 tradesâ€</a></ol><li><a href=https://blogs.alokranjan.me/blog/inv/#reflections>Reflections ~</a><li><a href=https://blogs.alokranjan.me/blog/inv/#visuals>Visuals</a><ol><li><a href=https://blogs.alokranjan.me/blog/inv/#raw-data>raw data</a><li><a href=https://blogs.alokranjan.me/blog/inv/#strategy-performance>strategy performance</a><li><a href=https://blogs.alokranjan.me/blog/inv/#test-coverage>test coverage</a></ol><li><a href=https://blogs.alokranjan.me/blog/inv/#source-code>source code</a></ol></div></div></details><a title="Go to Top" href=#top id=go-to-top><i class=icon></i></a><a href="https://shareopenly.org/share/?url=https://blogs.alokranjan.me/blog/inv/&text=A%20backend%20project%20featuring%20FastAPI%2C%20PostgreSQL%2C%20and%20Docker%2C%20with%20a%20tested%20moving%20average%20crossover%20trading%20strategy." id=share title=Share><i class=icon></i></a><a title="File an Issue" href=https://github.com/ryu-ryuk/blog/issues id=issue><i class=icon></i></a></div><nav id=toc><h2>Table of Contents</h2><ol><li><a href=https://blogs.alokranjan.me/blog/inv/#how-it-started>How it started?</a><li><a href=https://blogs.alokranjan.me/blog/inv/#what-s-inside>Whatâ€™s inside?</a><li><a href=https://blogs.alokranjan.me/blog/inv/#the-trading-logic>The Trading Logic!</a><li><a href=https://blogs.alokranjan.me/blog/inv/#uff-bugs>Uff! Bugs</a><ol><li><a href=https://blogs.alokranjan.me/blog/inv/#beetle-test-db-nightmare>ğŸ Test DB nightmare</a><li><a href=https://blogs.alokranjan.me/blog/inv/#beetle-strategy-returns-0-trades>ğŸ Strategy returns â€œ0 tradesâ€</a></ol><li><a href=https://blogs.alokranjan.me/blog/inv/#reflections>Reflections ~</a><li><a href=https://blogs.alokranjan.me/blog/inv/#visuals>Visuals</a><ol><li><a href=https://blogs.alokranjan.me/blog/inv/#raw-data>raw data</a><li><a href=https://blogs.alokranjan.me/blog/inv/#strategy-performance>strategy performance</a><li><a href=https://blogs.alokranjan.me/blog/inv/#test-coverage>test coverage</a></ol><li><a href=https://blogs.alokranjan.me/blog/inv/#source-code>source code</a></ol></nav><hr><h2 id=how-it-started>How it started?</h2><p>Yesterday, I received a backend assignment from Invsto. the goal was to build a containerized API service that could store, serve, and analyze Stock price data.<hr><h2 id=what-s-inside>Whatâ€™s inside?</h2><p>I built a complete FastAPI backend with the following key components:<ul><li>a <strong>PostgreSQL</strong> database to store time-series price data<li>a clean rest <strong>API</strong> to ingest and retrieve it<li>a <em>moving average crossover strategy</em> to analyze market trends<li><strong>unit tests</strong> with over <strong><em>90% coverage</em></strong><li>a fully <strong>dockerized</strong> environment, orchestrated via <strong>make</strong> commands</ul><p>but beyond the checklist, what made this project worthwhile was how it <em>felt</em> like building something production-readyâ€”debugging tests, handling edge cases, and documenting everything like it mattered; because I had planned to log it in this blogging website (finally)<hr><h2 id=the-trading-logic>The Trading Logic!</h2><p>at the core is a simple but <strong>Effective Trading Strategy</strong>:<ul><li>take two moving averagesâ€”one short (20-day), one long (50-day)<li>when the short average crosses <em>above</em> the long, thatâ€™s a <strong>Buy</strong> signal<li>when it crosses <em>below</em>, thatâ€™s a <strong>Sell</strong></ul><p>the system scans the data for crossover points and calculates basic profit/loss from those trades. simple logic, but implementing it cleanly, testably, and in a way that integrates into an APIâ€”thatâ€™s where the challenge lies.<hr><h2 id=uff-bugs>Uff! Bugs</h2><h3 id=beetle-test-db-nightmare>ğŸ Test DB nightmare</h3><p>Early on, tests kept failing even though they used a separate sqlite database. turned out they were accidentally connecting to the dev postgres containerâ€”resulting in state bleed and weird errors.<p><strong>fix</strong>: I updated the test setup to fully isolate the sqlite test DB, and cleaned stale containers using <code>make down</code>. <strong>lesson</strong>: To double-check your test environment assumptions.<hr><h3 id=beetle-strategy-returns-0-trades>ğŸ Strategy returns â€œ0 tradesâ€</h3><p>My tests expected a buy signalâ€”but the logic returned nothing.<p><strong>fix</strong>: Turns out my strategy only counts <em>full trades</em> (buy + sell). the test data had a buy signal, but no corresponding sell. I had to redesign the test to simulate a full market cycle. <strong>lesson</strong>: Test data should reflect the exact logic youâ€™re testingâ€”not just part of it.<hr><h2 id=reflections>Reflections ~</h2><p>This project taught me a lotâ€”not just about FastAPI, Docker, or (<em>specially</em>)<strong>pandas</strong>â€”but about treating small assignments like real systems. the biggest win wasnâ€™t just getting it to work, but making it clean, testable, and explainable.<hr><h2 id=visuals>Visuals</h2><blockquote><p>There is a live recorded demo in the GitHub Repo as well!</blockquote><h3 id=raw-data>raw data</h3><figure><p><img alt=data src=https://blogs.alokranjan.me/blog/inv/data.webp><figcaption>the raw data in the endpoint `/data`</figcaption></figure><br><h3 id=strategy-performance>strategy performance</h3><figure><p><img alt=strategy src=https://blogs.alokranjan.me/blog/inv/perf.webp><figcaption>preview of the `/strategy/performance` endpoint</figcaption></figure><br><h3 id=test-coverage>test coverage</h3><figure><p><img alt=test src=https://blogs.alokranjan.me/blog/inv/test.webp><figcaption>tests report</figcaption></figure><br><h2 id=source-code>source code</h2><p>Check out the full code, project structure, and setup instructions here: <strong><a href=https://github.com/ryu-ryuk/inv>github.com/ryu-ryuk/inv</a></strong></p><script>window.addEventListener('DOMContentLoaded', function() {
	document.querySelectorAll('article :is(h1, h2, h3, h4, h5, h6)').forEach(function(heading) {
	    if (!heading.id) return;
	    if (heading.querySelector('.zola-anchor')) return;
	    var anchor = document.createElement('a');
	    anchor.className = 'zola-anchor';
	    anchor.href = '#' + heading.id;
	    anchor.setAttribute('aria-label', 'Anchor link for: ' + heading.id);
	    anchor.textContent = '# ';
	    heading.insertBefore(anchor, heading.firstChild);
	  });
	});</script></article><hr><nav id=post-nav><a class="post-nav-item post-nav-prev" href=https://blogs.alokranjan.me/blog/intro/> <div class=nav-arrow>Previous</div> <span class=post-title>who tis the?</span> </a><a class="post-nav-item post-nav-next" href=https://blogs.alokranjan.me/blog/agentic-ai/> <div class=nav-arrow>Next</div> <span class=post-title>Agentic AI: planning, reasoning, and acting with Autonomy</span> </a></nav><span class=hidden id=copy-code-text>Copy Code</span><span class=hidden id=search-index>https://blogs.alokranjan.me/search_index.en.json</span><span class=hidden id=more-matches-text>$MATCHES more matches</span></main><footer id=site-footer><ul id=socials><li><a rel=" me" href=https://github.com/ryu-ryuk title=GitHub> <i style="--icon:url(&#34data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EGitHub%3C/title%3E%3Cpath d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E&#34)" class=icon></i> <span>GitHub</span> </a><li><a rel=" me" href=https://x.com/ryu1033658 title=Twitter> <i style="--icon:url(&#34data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ETwitter%3C/title%3E%3Cpath d='M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z'/%3E%3C/svg%3E&#34)" class=icon></i> <span>Twitter</span> </a></ul><div class=hr-decor><span>âœ¦</span></div><div class=webring-container><div class=webring-badge><a rel="noopener noreferrer" href=https://ctp-webr.ing/ryu/previous target=_blank>â†</a><a rel="noopener noreferrer" href=https://ctp-webr.ing/ target=_blank> <img alt="Catppuccin Webring" height=32 src=https://noololly.studio/catppuccin.png width=32> </a><a rel="noopener noreferrer" href=https://ctp-webr.ing/ryu/next target=_blank>â†’</a></div><div class=webring-badge><a rel="noopener noreferrer" href=https://webops.iitmparadox.org/ryu/previous target=_blank>â†</a><a rel="noopener noreferrer" href=https://webops.iitmparadox.org/ target=_blank>WebOps Webring</a><a rel="noopener noreferrer" href=https://webops.iitmparadox.org/ryu/next target=_blank>â†’</a></div></div></footer>